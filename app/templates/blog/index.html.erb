<% content_for :title, "Blog" %>

<div class="lg:max-w-[61.75%] w-full mx-auto lg:pt-12 lg:pb-12 pt-5">
  <header class="lg:mb-12 mb-6 text-center">
    <h1 class="lg:hidden text-2xl font-semibold mb-1">
      Blog
    </h1>
    <p class="lg:text-lg text-md text-neutral-500 text-balance">
      The latest updates from the Hanami, Dry, and Rom projects.
    </p>
  </header>

  <% if posts.any? %>
    <ol class="flex flex-col lg:gap-8 gap-6 lg:mb-10 mb-6">
      <% posts.each do |post| %>
        <li
          data-testid="blog-post"
          class="theme-<%= post.org || "hanakai" %>-light"
        >
          <%= render "svgs/wiggle", class_name: "text-primary flex-1 mb-5", height: 14, stroke_width: 2 %>
          <div class="flex gap-6">
            <%= render "svgs/#{post.org || "hanakai"}_logo", width: 30, height: 30, class_name: "shrink-0" %>
            <div class="mt-2 flex flex-col lg:gap-3 gap-2">
              <time
                class="
                  block font-mono uppercase text-xs font-semibold
                  text-primary tracking-wide
                "
                data-testid="date"
                datetime="<%= post.published_datetime %>"
              >
                <%= post.published_date %>
              </time>

              <h2 class="lg:text-3xl text-2xl font-bold">
                <a
                  class="
                    text-link hover:decoration-[3px] hover:underline
                    hover:decoration-(--hk-color-text-link-underline)
                  "
                  href="<%= post.url_path %>"
                >
                  <%= post.title %>
                </a>
              </h2>

              <p class="text-lg"><%= post.excerpt %></p>
            </div>
          </div>
        </li>
      <% end %>
    </ol>
    <div>
      <%= render "svgs/wiggle", class_name: "text-primary flex-1 mb-8", height: 14, stroke_width: 2 %>
      <nav
        class="flex items-center gap-4 justify-center"
        aria-label="More results"
      >
        <% if page > 1 %>
          <a
            class="
              bg-primary text-primary-reversed
              flex items-center px-3 md:px-2.5 py-2 leading-tight rounded-xl text-lg font-semibold
              hover:shadow-md
            "
            href="<%= "/blog/page/#{page - 1}" %>"
          >
            <- Previous page
          </a>
        <% end %>

        <% if posts.any? %>
          <a
            class="
              bg-primary text-primary-reversed
              flex items-center md:px-2.5 px-3 py-2 leading-tight rounded-xl text-lg font-semibold
              hover:shadow-md
            "
            href="<%= "/blog/page/#{page + 1}" %>"
          >
            Next page ->
          </a>
        <% end %>
      </nav>
    </div>
  <% end %>

  <% if posts.none? %>
    <%= render "svgs/wiggle", class_name: "text-primary flex-1 mb-5", height: 14, stroke_width: 2 %>
    <p class="text-center text-2xl lg:my-20">
      No more posts.
      <a class="text-link underline" href="/blog">Back to the beginning?</a>
    </p>
  <% end %>
</div>
