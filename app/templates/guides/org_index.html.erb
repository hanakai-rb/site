<% content_for :title, "#{org_name(org_slug)} #{version} Guides" %>

<%= render_with_slots "doc_pages/main" do |main| %>
  <%= main.slot :navigation do %>
    <%= render_with_slots "doc_pages/pages_nav_desktop", org: org_slug, version:, other_versions: versions, path_prefix: "/guides/#{org_slug}" do |pages_nav_desktop| %>
      <%= pages_nav_desktop.slot :nav do %>
        <ol data-testid="guides-list">
          <% guides.each do |guide_for_nav| %>
            <li class="mb-6">
              <div
                class="
                  font-mono uppercase text-xs font-semibold text-primary
                  tracking-wide mb-2
                "
              >
                <%= guide_for_nav.title %>
              </div>
              <%= render "doc_pages/pages_nav", pages: guide_for_nav.pages.nested, depth: 0, testid: 'pages-nav', current_page_url: nil %>
            </li>
          <% end %>
        </ol>
      <% end %>
    <% end %>
  <% end %>

  <%= main.slot :content do %>
    <header class="mb-12">
      <h1 class="text-4xl font-black mb-4"><%= org_name(org_slug) %> guides</h1>
      <div class="flex items-center gap-4">
        <span class="text-2xl font-semibold text-gray-700"><%= version %></span>
      </div>
    </header>

    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
      data-testid="guides"
    >
      <% guides.each do |guide| %>
        <a
          href="<%= guide.url_path %>"
          class="
            block p-6 bg-white border border-gray-200 rounded-lg shadow-sm
            hover:shadow-md transition-shadow duration-200
            hover:border-primary
          "
        >
          <h3 class="text-xl font-semibold mb-2 text-gray-900">
            <%= guide.title %>
          </h3>
          <div class="text-sm text-primary font-medium">
            View guide â†’
          </div>
        </a>
      <% end %>
    </div>
  <% end %>
<% end %>
