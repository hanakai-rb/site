<% content_for :title, "Guides" %>

<%= render_with_slots "doc_pages/main" do |main| %>
  <%= main.slot :navigation do %>
    <div class="hidden md:block">
      <ol data-testid="guides-list">
        <li class="mb-8 theme-hanami-light">
          <div class="flex items-center gap-2 pb-2 mb-4">
            <%= render "svgs/hanami_logo", width: 24, height: 24 %>

            <span
              class="
                font-mono uppercase text-sm font-semibold text-hanami-500
                tracking-wide
              "
            >
              <a href="#hanami">Hanami</a>
            </span>
          </div>

          <ol>
            <% guides.fetch("hanami").each do |guide| %>
              <li>
                <a
                  href="<%= guide.url_path %>"
                  class="
                    inline-block py-1 pl-4 border-l-2 border-slate-100
                    text-neutral hover:text-gray-800 hover:border-slate-300
                    transition-color duration-100 pr-2
                  "
                >
                  <%= guide.title %>
                </a>
              </li>
            <% end %>
          </ol>
        </li>

        <li class="mb-8 theme-dry-light">
          <div class="flex items-center gap-2 pb-2 mb-4">
            <%= render "svgs/dry_logo", width: 24, height: 24 %>

            <span
              class="
                font-mono uppercase text-sm font-semibold text-dry-500
                tracking-wide
              "
            >
              <a href="#dry">Dry</a>
            </span>
          </div>

          <ol>
            <% guides.fetch("dry").each do |guide| %>
              <li>
                <a
                  href="<%= guide.url_path %>"
                  class="
                    inline-block py-1 pl-4 border-l-2 border-slate-100
                    text-neutral hover:text-gray-800 hover:border-slate-300
                    transition-color duration-100 pr-2
                  "
                >
                  <%= guide.title %>
                </a>
              </li>
            <% end %>
          </ol>
        </li>

        <li class="mb-8 theme-rom-light">
          <div class="flex items-center gap-2 pb-2 mb-4">
            <%= render "svgs/rom_logo", width: 24, height: 24 %>

            <span
              class="
                font-mono uppercase text-sm font-semibold text-rom-500
                tracking-wide
              "
            >
              <a href="#rom">ROM</a>
            </span>
          </div>

          <ol>
            <% guides.fetch("rom").each do |guide| %>
              <li>
                <a
                  href="<%= guide.url_path %>"
                  class="
                    inline-block py-1 pl-4 border-l-2 border-slate-100
                    text-neutral hover:text-gray-800 hover:border-slate-300
                    transition-color duration-100 pr-2
                  "
                >
                  <%= guide.title %>
                </a>
              </li>
            <% end %>
          </ol>
        </li>
      </ol>
    </div>
  <% end %>

  <%= main.slot :content do %>
    <header class="mb-12">
      <h1 class="text-4xl font-extrabold mb-4">Guides</h1>

      <p class="text-lg text-gray-600">
        Learn how to use Hanami, Dry, and ROM with our comprehensive guides.
      </p>
    </header>

    <div class="space-y-16">
      <section id="hanami" class="theme-hanami-light">
        <div class="flex items-center gap-3 mb-6">
          <%= render "svgs/hanami_logo", width: 32, height: 32 %>

          <h2 class="text-3xl font-bold text-hanami-500">Hanami</h2>

          <div data-testid="hanami-versions">
            <%= render "doc_pages/version_select",
                      id: "hanami-version-select",
                      testid: nil,
                      version: versions.fetch("hanami").first,
                      other_versions: versions.fetch("hanami"),
                      path_prefix: "/guides/hanami",
                      anchor: "left" %>
          </div>
        </div>

        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16"
          data-testid="hanami-guides"
        >
          <% guides.fetch("hanami").each do |guide| %>
            <a
              href="<%= guide.url_path %>"
              class="
                block p-6 bg-white border border-gray-200 rounded-lg
                shadow-sm hover:shadow-md transition-shadow duration-200
                hover:border-hanami-500
              "
            >
              <h3 class="text-xl font-semibold mb-2 text-gray-900">
                <%= guide.title %>
              </h3>

              <div class="text-sm text-hanami-500 font-medium">
                View guide →
              </div>
            </a>
          <% end %>
        </div>
      </section>

      <section id="dry" class="theme-dry-light">
        <div class="flex items-center gap-3 mb-6">
          <%= render "svgs/dry_logo", width: 32, height: 32 %>

          <h2 class="text-3xl font-bold text-dry-500">Dry</h2>
        </div>

        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16"
          data-testid="dry-guides"
        >
          <% guides.fetch("dry").each do |guide| %>
            <a
              href="<%= guide.url_path %>"
              class="
                block p-6 bg-white border border-gray-200 rounded-lg
                shadow-sm hover:shadow-md transition-shadow duration-200
                hover:border-dry-500
              "
            >
              <h3 class="text-xl font-semibold mb-2 text-gray-900">
                <%= guide.title %>
              </h3>

              <div class="text-sm text-dry-500 font-medium">
                View guide →
              </div>
            </a>
          <% end %>
        </div>
      </section>

      <section id="rom" class="theme-rom-light">
        <div class="flex items-center gap-3 mb-6">
          <%= render "svgs/rom_logo", width: 32, height: 32 %>

          <h2 class="text-3xl font-bold text-rom-500">ROM</h2>

          <div data-testid="rom-versions">
            <%= render "doc_pages/version_select",
                      id: "rom-version-select",
                      testid: nil,
                      version: versions.fetch("rom").first,
                      other_versions: versions.fetch("rom"),
                      path_prefix: "/guides/rom",
                      anchor: "left" %>
          </div>
        </div>

        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16"
          data-testid="rom-guides"
        >
          <% guides.fetch("rom").each do |guide| %>
            <a
              href="<%= guide.url_path %>"
              class="
                block p-6 bg-white border border-gray-200 rounded-lg
                shadow-sm hover:shadow-md transition-shadow duration-200
                hover:border-rom-500
              "
            >
              <h3 class="text-xl font-semibold mb-2 text-gray-900">
                <%= guide.title %>
              </h3>

              <div class="text-sm text-rom-500 font-medium">
                View guide →
              </div>
            </a>
          <% end %>
        </div>
      </section>
    </div>
  <% end %>
<% end %>
